name = "bt-servant-whatsapp-gateway"
main = "src/index.ts"
compatibility_date = "2024-01-01"
account_id = "5a3ffd86280d3ed086be76d955829242"

[observability]
enabled = true
head_sampling_rate = 1

[vars]
ENVIRONMENT = "production"
ENGINE_BASE_URL = "https://api.btservant.ai"
ENGINE_ORG = "unfoldingWord"
CHUNK_SIZE = "1500"
MESSAGE_AGE_CUTOFF_SECONDS = "3600"
PROGRESS_THROTTLE_SECONDS = "3.0"
FACEBOOK_USER_AGENT = "facebookexternalua"

# Secrets (set via `wrangler secret put`):
# META_VERIFY_TOKEN
# META_WHATSAPP_TOKEN
# META_PHONE_NUMBER_ID
# META_APP_SECRET
# ENGINE_API_KEY
# GATEWAY_PUBLIC_URL

# ──── Staging environment ────
[env.staging]
name = "bt-servant-whatsapp-gateway-staging"

[env.staging.vars]
ENVIRONMENT = "staging"
ENGINE_BASE_URL = "https://bt-servant-worker-staging.unfoldingword.workers.dev"
ENGINE_ORG = "unfoldingWord"
CHUNK_SIZE = "1500"
MESSAGE_AGE_CUTOFF_SECONDS = "3600"
PROGRESS_THROTTLE_SECONDS = "3.0"
FACEBOOK_USER_AGENT = "facebookexternalua"

# Staging secrets (set via `wrangler secret put --env staging`):
# META_VERIFY_TOKEN
# META_WHATSAPP_TOKEN
# META_PHONE_NUMBER_ID
# META_APP_SECRET
# ENGINE_API_KEY
# GATEWAY_PUBLIC_URL
